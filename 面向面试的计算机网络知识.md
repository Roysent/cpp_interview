# 1 物理层

## 1.1 信道复用技术

### 1.1.1 频分复用

### 1.1.2 时分复用

### 1.1.3 波分复用

## 1.2 宽带接入技术

### 1.2.1 ADSL技术

### 1.2.2 光纤同轴混合网

# 2 数据链路层

链路：从一个结点**到相邻结点**的一段物理线路（有线或无线），而中间没有任何其他的交换结点。

数据链路：把实现通信协议的硬件和软件加到链路上，构成数据链路。

## 2.1 三个基本问题

### 封装成帧

### 透明传输

解决方法：字节填充或字符填充，在数据中出现控制字符的前面插入转义字符

### 差错检测

循环冗余检测CRC：只能做到对帧的无差错接收



## 2.2 点对点协议（PPP协议）

### 字节填充（RFC1662规定）

![image-20210606114822959](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210606114822959.png)



### 零比特填充

数据发送端在扫描信息段时，发现5个连续的1就填充一个0

## 2.3 CSMA/CD协议

![image-20210607101851180](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210607101851180.png)

## 2.4 以太网的MAC层

![image-20210607102917262](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210607102917262.png)

![image-20210607102953835](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210607102953835.png)

### 为什么传输媒体上实际传送的要比MAC帧多8字节？

为了接收端迅速实现位同步，从MAC子层向下传到物理层时还要在帧的前面插入8字节（有硬件生成）。

第一个字段是7个字节的**前同步码**（1和0交替码）：使接收端的适配器在接收MAC帧时能迅速调整其时钟频率，使它和发送端时钟同步，实现“位同步”

第二字段**帧开始定界符**：定义为10101011，最后的11告诉接收端MAC帧信息到来

# 3 网络层

路由器因同时接到两个局域网上，因此有两个硬件地址。

## 3.1 地址解析协议ARP

从IP地址中解析出数据链路层使用的硬件地址，解决**同一个局域网上**的主机或路由器的IP地址与硬件地址映射问题

主机ARP高速缓冲中存放一个从IP地址到硬件地址的映射表，并且这个映射表还经常动态更新

### 当某主机的ARP高速缓存是空的，怎么添加其他主机的硬件地址？

![image-20210609092328266](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210609092328266.png)

![image-20210609092344721](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210609092344721.png)

## 3.2 IP协议

### 3.2.1 IP数据报解析



### 3.2.2 IP层转发分组

![image-20210609103918583](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210609103918583.png)

![image-20210609104012039](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210609104012039.png)

#### 划分子网

划分子网增加了网络的灵活性，但减少了能够连接在网络上的主机总数

把IP地址的主机号这部分进行再划分，不改变IP地址原来的网络号（对外封闭，看起来还是一个网络）

子网掩码：子网号最好不要全1或全0

#### 使用子网时分组的转发

![image-20210609150500863](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210609150500863.png)

#### 无分类编址CIDR（构造超网）

![image-20210609155007247](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210609155007247.png)

## 3.3 国际控制报文协议ICMP

ICMP报文作为IP层数据报的数据，加上数据报的首部，组成IP数据报发送出去

![image-20210609163753478](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210609163753478.png)



## 3.4 路由选择协议

### 3.4.1 内部网关协议RIP(路由信息协议)

分布式路由选择协议

允许一条路径最多只能包含15个路由器，“跳数”等于16时即相当于不可达。RIP**只适用于小型互联网**

![image-20210610100220644](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210610100220644.png)

**特点：好消息传播快，坏消息传播慢**

使用运输层的用户数据报UDP进行传送（使用UDP的端口520）

### 3.4.2 OSPF协议（开放最短路径优先）

分布式链路状态协议

![image-20210610104317175](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210610104317175.png)

**OSPF分组用IP数据报传送**

### 3.4.3 外部网关协议BGP

力求寻找一条能够到达目的网络且比较好的路由，并非要寻找一条最佳路由

采用**路径向量路由选择协议**

## 3.5 IPv6

不保证数据报的可靠交付

## 3.6 IP多播

### 3.6.1 网际组管理协议IGMP

## 3.7 虚拟专用网VPN和网络地址转换NAT

### 3.7.1 VPN

三个专用地址块：

![image-20210611121328741](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210611121328741.png)

专用网内部的主机不能充当服务器用，因为互联网上的客户无法请求专用网内的服务器提供服务

## 3.8 多协议标记交换MPLS

![image-20210612104858790](C:\Users\55215\AppData\Roaming\Typora\typora-user-images\image-20210612104858790.png)

# 4 运输层
